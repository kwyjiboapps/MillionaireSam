<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Piano en JavaScript</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #222;
    }
    .piano {
      display: flex;
    }
    .key {
      width: 60px;
      height: 200px;
      border: 1px solid #000;
      background: white;
      margin: 1px;
      text-align: center;
      line-height: 200px;
      cursor: pointer;
      user-select: none;
      font-family: sans-serif;
      font-weight: bold;
    }
    .key.black {
      width: 40px;
      height: 120px;
      background: black;
      color: white;
      margin-left: -20px;
      margin-right: -20px;
      z-index: 2;
      position: relative;
      line-height: 120px;
    }
    .key:active {
      background: #ccc;
    }
    .key.black:active {
      background: #555;
    }
  </style>
</head>
<body>
  <div class="piano">
    <div class="key" data-note="C4">Do</div>
    <div class="key black" data-note="C#4">Do#</div>
    <div class="key" data-note="D4">Re</div>
    <div class="key black" data-note="D#4">Re#</div>
    <div class="key" data-note="E4">Mi</div>
    <div class="key" data-note="F4">Fa</div>
    <div class="key black" data-note="F#4">Fa#</div>
    <div class="key" data-note="G4">Sol</div>
    <div class="key black" data-note="G#4">Sol#</div>
    <div class="key" data-note="A4">La</div>
    <div class="key black" data-note="A#4">La#</div>
    <div class="key" data-note="B4">Si</div>
  </div>

  <script>
    const keys = document.querySelectorAll(".key");

    // Generar sonidos con la API Web Audio
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playNote(frequency) {
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();

      oscillator.type = "sine"; // también puede ser "square", "triangle", "sawtooth"
      oscillator.frequency.value = frequency;

      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      oscillator.start();
      gainNode.gain.exponentialRampToValueAtTime(
        0.00001,
        audioCtx.currentTime + 1
      ); // duración 1s
    }

    // Notas y frecuencias (4ª octava)
    const notes = {
      "C4": 261.63,
      "C#4": 277.18,
      "D4": 293.66,
      "D#4": 311.13,
      "E4": 329.63,
      "F4": 349.23,
      "F#4": 369.99,
      "G4": 392.00,
      "G#4": 415.30,
      "A4": 440.00,
      "A#4": 466.16,
      "B4": 493.88
    };

    keys.forEach(key => {
      key.addEventListener("click", () => {
        const note = key.dataset.note;
        playNote(notes[note]);
      });
    });
  </script>
</body>
</html>
